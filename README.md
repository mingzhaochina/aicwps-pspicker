# AICWPS-PSPicker

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.4246086.svg)](https://doi.org/10.5281/zenodo.4246086)

#### 介绍
基于PhaseNet的波形识别软件。

#### 软件架构
中国地震局地球物理研究所根据连续地震波形处理的工作需要，基于tensorflow平台和Intel 的OpenVINO™工具套件完成了U-net震相自动检测与到时拾取模型的优化和推理引擎构建，并用docker容器技术进行云端或服务器端部署，并基于C#和.NET 框架 4.0，根据不同用户的需求开发了单机版和服务器版Windows客户端交互应用程序，使得用户既可以在本地计算机上同时部署docker深度学习服务和安装相应的客户端应用，也可以在云端或另一台计算能力更强的服务器上部署docker深度学习服务，在本地安装一个可与服务器和用户交互的客服端应用即可。


#### 安装教程

1.  打开install目录。
2.  点击Setup.msi或者Setup.exe均可安装。
3.  注意安装路径不要保存在C盘。

#### 使用说明

1.  登录：
    - 此部分主要用作系统的登录界面，用户需要在弹出的窗口中填写用户名与密码，并选择系统的版本（单机/联网）与语言（中文/英文）。
    - 对于使用联网版系统的用户，需要点击“设置”按钮，设置服务器的IP地址等信息。
2.  服务器设置：
    - 用户在使用联网版系统时，需要在服务器端安装docker环境，并导入相应版本的镜像，就可以将计算过程在服务器端完成，系统只需要与服务器做好通信即可。在此模块中，用户可以设置服务器的IP地址、本地IP地址、服务器的用户名和密码等信息。
3.  主界面：
    - 程序主界面是系统与用户之间进行信息交互的媒介，用户可以在主界面中进行各种操作，主界面也为算法设置、文件选择、结果输出、绘制图片等模块构建了一个框架，这些模块以子页面的形式填充在主界面中，使程序看起来更加整齐美观。
4.  算法设置：
    - 在算法设置页面中，用户可以根据自己的需要，对概率阈值、运行设备（包括cpu、gpu、FPGA）、是否启用多线程、输出文件格式（包括csv、json、jopens）等参数进行设置。这些参数将保存在指令中，当用户添加完毕文件之后，发送给docker进行处理。
    - 对于单机版系统，用户需要提前在电脑安装的docker中设置共享文件夹，用于和系统进行文件交互，并在系统页面中设置好共享文件夹的目录。
5.  文件选择：
    - 算法设置完毕后，点击“添加”，进入文件选择页面。系统支持的文件格式有mseed、sac、npz，支持选择单个、多个文件以及文件夹，添加的文件都会显示在窗体中。
    - 对于单机版系统，系统会将所选目录下的文件复制到共享文件夹下，等待计算。对于联网版系统，系统连接服务器，将所选目录下的文件发送至服务器文件夹下，等待系统的下一步指令。
6.  结果输出：
    - 用户点击“开始”，系统将发送对应的控制指令，调用docker计算输入文件夹下的全部文件。对于单机版系统，系统会将输出结果复制到输出文件夹下。
    - 对于联网版系统，系统会连接服务器，并将结果下载至输出文件夹下。
7.  绘制结果：
    - 用户计算完毕之后，点击“图表”，系统将在窗口显示出计算结果的图片。图片的绘制是在服务器端调用docker处理完成的，对于单机版系统，系统会将输出的图片复制到输出文件夹下，并检索对应序号显示在窗体中。
    - 对于联网版系统，系统会连接服务器，并将对应序号的图片下载至输出文件夹下，并显示在窗体中。



#### 参与贡献

1.  Ming Zhao, Jiahui Ma, Hao Chang. (2020, November 5).  mingzhaochina/aicwps-pspicker 1.0 (Version 1.0). Zenodo. 10.5281/zenodo.4246086
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.4246086.svg)](https://doi.org/10.5281/zenodo.4246086)
2.  Ming, Z., Jiahui, M., Hao, C., & chenshi. PhaseNet-based Seismic Wave and Phase Detection System. Earthquake Research in China, doi:10.19743/j.cnki.0891-4176.202102001
